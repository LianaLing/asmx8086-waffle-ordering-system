.MODEL SMALL
.STACK 100
.DATA
 PRICEM DB "[WAFFLE SET]",
          13, 10,"WAFFLE             = RM 1.00",
		  13, 10,"[CHOOSE TWO FLAVOURS]:",
		  13, 10, "(1) CHOCOLATE     = RM 0.70",
		  13, 10, "(2) PEANUT BUTTER = RM 0.50",
		  13, 10, "(3) STRAWBERRY    = RM 1.00",
		  13, 10, "(4) BLUEBERRY     = RM 1.00",
		  13, 10, "(5) KAYA          = RM 0.30$"
		  
 WFL  DW 100
 CHOC DW 70
 PNUT DW 50
 STRB DW 100
 BLUB DW 100
 KAYA DW 30
 
 SST  DB 60
 MDIS DB 10
 
 SETM DB 13,10,"NUMBER OF SET(S): $"
 SET  DB 0
 UNIT DW 20 DUP (0)
 FLV1M DB 13,10,"FLAVOUR 1: $"
 FLV1 DW 20 DUP (0)
 FLV2M DB 13,10,"FLAVOUR 2: $"
 FLV2 DW 20 DUP (0)
 SUBTM DB 13,10,"SUBTOTAL: RM $"
 SUBT DW 0
 
 MID  DB 13,10,"MEMBER ID: $"
 MEMB DB 13,10,"CUSTOMER NAME: $"
 
 TEN  DB 10
 TEMP DB 0
 
.CODE
MAIN PROC
 MOV AX,@DATA
 MOV DS,AX
 
 ;----------DISPLAY PRICE LIST
 MOV AH,09H
 LEA DX,PRICEM
 INT 21H
 
 ;----------INPUT SET
 MOV AH,09H
 LEA DX,SETM
 INT 21H
 
 MOV AH,01H
 INT 21H
 MOV SET,AL
 
 ;------------LOOP FLV ACCORDING TO SET
 SUB SET,30H
 MOV CL,SET
 MOV SI,0
 
 FLAVOURS:
 
 ;------------INPUT FLV1
  MOV AH,09H
  LEA DX,FLV1M
  INT 21H
 
  MOV AH,01H
  INT 21H
  MOV FLV1[SI],AX
 
 ;------------INPUT FLV2
  MOV AH,09H
  LEA DX,FLV2M
  INT 21H
  
  MOV AH,01H
  INT 21H
  MOV FLV2[SI],AX

  INC SI
  
  LOOP FLAVOURS
  
  ;------------DETERMINE FLAVOURS
  MOV CL,SET
  MOV SI,0
  
  DETERMINEFLV1:
   CMP SI,SET
   JE  DETERMINEFLV2
   MOV AX,0
   SUB FLV1[SI],30H
   MOV AX,FLV1[SI]		;AX=000X
   CMP AL,01
   JE CHOCOLATE1
   CMP AL,02
   JE PBUTTER1
   CMP AL,03
   JE STRAWBERRY1
   CMP AL,04
   JE BLUEBERRY1
   CMP AL,05
   JE KAYA1
   LOOP DETERMINEFLV1
   
  MOV CL,SET
  MOV SI,0  
 
  DETERMINEFLV2:
   CMP SI,SET
   JE  UNITP
   MOV AX,0
   SUB FLV2[SI],30H
   MOV AX,FLV2[SI]		;AX=000X
   CMP AL,01
   JE CHOCOLATE2
   CMP AL,02
   JE PBUTTER2
   CMP AL,03
   JE STRAWBERRY2
   CMP AL,04
   JE BLUEBERRY2
   CMP AL,05
   JE KAYA2
   LOOP DETERMINEFLV2
   
  ;----------DETERMINE FLV1
  
  CHOCOLATE1:
   MOV AX,0
   MOV AX,CHOC
   MOV FLV1[SI],AX
   INC SI
   JMP DETERMINEFLV1
   
  PBUTTER1:
   MOV AX,0
   MOV AX,PNUT
   MOV FLV1[SI],AX
   INC SI
   JMP DETERMINEFLV1
   
  STRAWBERRY1:
   MOV AX,0
   MOV AX,STRB
   MOV FLV1[SI],AX
   INC SI
   JMP DETERMINEFLV1
   
  BLUEBERRY1:
   MOV AX,0
   MOV AX,BLUB
   MOV FLV1[SI],AX
   INC SI
   JMP DETERMINEFLV1
   
  KAYA1:
   MOV AX,0
   MOV AX,KAYA
   MOV FLV1[SI],AX
   INC SI
   JMP DETERMINEFLV1
   
 ;----------DETERMINE FLV2
   
  CHOCOLATE2:
   MOV AX,0
   MOV AX,CHOC
   MOV FLV2[SI],AX
   INC SI
   JMP DETERMINEFLV2
   
  PBUTTER2:
   MOV AX,0
   MOV AX,PNUT
   MOV FLV2[SI],AX
   INC SI
   JMP DETERMINEFLV2
   
  STRAWBERRY2:
   MOV AX,0
   MOV AX,STRB
   MOV FLV2[SI],AX
   INC SI
   JMP DETERMINEFLV2
   
  BLUEBERRY2:
   MOV AX,0
   MOV AX,BLUB
   MOV FLV2[SI],AX
   INC SI
   JMP DETERMINEFLV2
   
  KAYA2:
   MOV AX,0
   MOV AX,KAYA
   MOV FLV2[SI],AX
   INC SI
   JMP DETERMINEFLV2
  
  ;-----------CALCULATE SUBTOTAL
  MOV CL,SET
  MOV SI,0
  
  UNITP:
   MOV AX,0
   MOV AX,WFL			;AX=0100
   ADD AX,FLV1[SI]
   ADD AX,FLV2[SI]
   MOV UNIT[SI],AX
   INC SI
   LOOP UNITP
   
  MOV CL,SET
  MOV SI,0
  
  SUBTOTAL:
   MOV AX,0
   ADD AX,UNIT[SI]
   LOOP SUBTOTAL
   
   MOV SUBT,AX
  
  ;----------DISPLAY SUBTOTAL
   MOV AH,09H
   LEA DX,SUBTM
   INT 21H
   
   MOV AH,09H
   LEA DX,SUBT
   INT 21H
 
 MOV AH,4CH
 INT 21H
MAIN ENDP
END MAIN